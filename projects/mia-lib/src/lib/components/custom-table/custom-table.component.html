<main class="bg-white bd-auto m-2 px-3 py-2">
  <ng-content select="[header]"></ng-content>

  <!-- Table -->
  <div class="custom-table">
    <mat-table
      [dataSource]="data"
      [trackBy]="trackByIdx"
      matSort
      matSortDisableClear
      [matSortActive]="defaultSortColumn"
      [matSortDirection]="defaultSortDirection"
    >
      <ng-container
        *ngFor="let column of columns; let idx = index"
        [matColumnDef]="column?.key"
      >
        <mat-header-cell *matHeaderCellDef mat-sort-header disableClear>
          <span class="truncate-cell">
            {{ column?.header || column?.key | uppercase }}
          </span>
        </mat-header-cell>
        <mat-cell *matCellDef="let row; let idx = index">
          <ng-container
            [ngTemplateOutlet]="columnTemplates[column?.key] || noTemplates"
            [ngTemplateOutletContext]="{ $implicit: row }"
          ></ng-container>
          <ng-template #noTemplates>
            <span class="truncate-cell">{{ row[column.key] }}</span>
          </ng-template>
        </mat-cell>
      </ng-container>

      <mat-header-row *matHeaderRowDef="displayColumns"></mat-header-row>
      <mat-row *matRowDef="let row; columns: displayColumns"></mat-row>

      <!-- Loading spinner -->
      <div *matNoDataRow>
        <div class="d-flex jc-center ai-center my-2">
          <mat-spinner [diameter]="50"></mat-spinner>
        </div>
      </div>
    </mat-table>
  </div>

  <!-- Pagination -->
  <mat-paginator
    *ngIf="pageable"
    [pageSizeOptions]="pageSizeOptions"
    [showFirstLastButtons]="showFirstLastButtons"
  ></mat-paginator>
</main>
