<form [formGroup]="form">
  <ng-container *ngIf="[mode.REGISTER, mode.LOGIN].includes(mode$.value)">
    <custom-button
      variant="outline"
      [disabled]="loading"
      buttonClass="width-100"
      (click)="googleSignIn()"
    >
      <img
        lazyImg
        width="16"
        class="mr-2"
        alt="google"
        src="assets/images/google.png"
      />
      <span>
        Sign {{ mode$.value === mode.LOGIN ? "in" : "up" }} with Google
      </span>
    </custom-button>
  </ng-container>

  <mat-divider [style.margin]="'1rem -1.5rem'"></mat-divider>

  <ng-container>
    <!-- Fields -->
    <custom-input label="Email" formControlName="email"></custom-input>
    <custom-input
      [label]="
        [mode.REGISTER, mode.LOGIN].includes(mode$.value)
          ? 'Password'
          : 'New password'
      "
      [type]="hidePassword ? 'password' : 'text'"
      formControlName="password"
    >
      <custom-button
        suffix
        variant="icon"
        iconClass="text-secondary"
        tooltip="{{ hidePassword ? 'View' : 'Hide' }}"
        (click)="hidePassword = !hidePassword"
      >
        <ng-container icon>
          {{ hidePassword ? "visibility_off" : "visibility" }}
        </ng-container>
      </custom-button>
    </custom-input>

    <!-- Utils -->
    <div
      class="d-flex jc-between ai-center cursor-pointer text-secondary text-deco-underline f-12 mb-2"
      [style.margin-top.px]="-8"
    >
      <a
        *ngIf="[mode.REGISTER, mode.FORGOT_PASSWORD].includes(mode$.value)"
        (click)="login()"
      >
        Already have an account?
      </a>
      <ng-container *ngIf="mode$.value === mode.LOGIN">
        <a (click)="register()"> Don't have an account? </a>
        <a (click)="forgotPassword()"> Forgot password? </a>
      </ng-container>
    </div>

    <!-- Buttons -->
    <div class="width-100">
      <custom-button
        variant="flat"
        buttonClass="width-100"
        (click)="onAction()"
        [loading]="loading"
        [disabled]="form.invalid || loading"
      >
        <ng-container [ngSwitch]="mode$.value">
          <ng-container *ngSwitchCase="mode.LOGIN"> Login </ng-container>
          <ng-container *ngSwitchCase="mode.REGISTER"> Register </ng-container>
          <ng-container *ngSwitchCase="mode.FORGOT_PASSWORD">
            Reset password
          </ng-container>
        </ng-container>
      </custom-button>
    </div>
  </ng-container>
</form>
